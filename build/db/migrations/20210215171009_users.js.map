{"version":3,"sources":["../../../src/db/migrations/20210215171009_users.js"],"names":["exports","up","knex","schema","raw","createTable","table","uuid","primary","notNullable","defaultTo","string","unique","specificType","references","inTable","onDelete","enu","date","bigInteger","timestamps","down","dropTable"],"mappings":";;AAAAA,OAAO,CAACC,EAAR,GAAa,UAAUC,IAAV,EAAgB;AAC3B,SAAOA,IAAI,CAACC,MAAL,CAAYC,GAAZ,CAAgB,uCAAhB,EACNC,WADM,CACM,OADN,EACe,UAACC,KAAD,EAAW;AAC/BA,IAAAA,KAAK,CAACC,IAAN,CAAW,IAAX,EAAiBC,OAAjB,GAA2BC,WAA3B;AACAH,IAAAA,KAAK,WAAL,CAAc,QAAd,EAAwBG,WAAxB,GAAsCC,SAAtC,CAAgD,IAAhD;AAEAJ,IAAAA,KAAK,CAACK,MAAN,CAAa,UAAb,EAAyBC,MAAzB;AACAN,IAAAA,KAAK,CAACO,YAAN,CAAmB,OAAnB,EAA4B,QAA5B,EAAsCD,MAAtC;AACAN,IAAAA,KAAK,WAAL,CAAc,iBAAd,EAAiCG,WAAjC,GAA+CC,SAA/C,CAAyD,KAAzD;AACAJ,IAAAA,KAAK,CAACK,MAAN,CAAa,qBAAb,EAAoCC,MAApC;AACAN,IAAAA,KAAK,CAACC,IAAN,CAAW,SAAX,EAAsBO,UAAtB,CAAiC,IAAjC,EAAuCC,OAAvC,CAA+C,OAA/C,EAAwDC,QAAxD,CAAiE,SAAjE,EAA4EP,WAA5E;AAEAH,IAAAA,KAAK,CAACK,MAAN,CAAa,YAAb;AACAL,IAAAA,KAAK,CAACK,MAAN,CAAa,WAAb;AAEAL,IAAAA,KAAK,CAACK,MAAN,CAAa,YAAb;AACAL,IAAAA,KAAK,CAACK,MAAN,CAAa,cAAb,EAA6BC,MAA7B,GAAsCH,WAAtC;AACAH,IAAAA,KAAK,CACJW,GADD,CACK,aADL,EACoB,CAAC,MAAD,EAAS,QAAT,EAAmB,aAAnB,CADpB,EACuD,CACrD;AACA;AAFqD,KADvD,EAKCP,SALD,CAKW,aALX;AAMAJ,IAAAA,KAAK,CAACY,IAAN,CAAW,KAAX;AACAZ,IAAAA,KAAK,CAACK,MAAN,CAAa,UAAb;AACAL,IAAAA,KAAK,CAACK,MAAN,CAAa,sBAAb,EAAqCC,MAArC;AACAN,IAAAA,KAAK,CAACa,UAAN,CAAiB,KAAjB;AACAb,IAAAA,KAAK,CAACa,UAAN,CAAiB,KAAjB;AACAb,IAAAA,KAAK,CAACc,UAAN,CAAiB,IAAjB,EAAsB,IAAtB;AACD,GA5BM,CAAP;AA6BD,CA9BD;;AAgCApB,OAAO,CAACqB,IAAR,GAAe,UAAUnB,IAAV,EAAgB;AAC7B,SAAOA,IAAI,CAACC,MAAL,CAAYmB,SAAZ,CAAsB,OAAtB,CAAP,CAD6B,CAE7B;AACA;AACA;AACA;AACA;AACD,CAPD","sourcesContent":["exports.up = function (knex) {\n  return knex.schema.raw('CREATE EXTENSION IF NOT EXISTS CITEXT')\n  .createTable(\"users\", (table) => {\n    table.uuid('id').primary().notNullable()\n    table.boolean('active').notNullable().defaultTo(true)\n\n    table.string(\"username\").unique();\n    table.specificType('email', 'CITEXT').unique()\n    table.boolean('email_confirmed').notNullable().defaultTo(false)\n    table.string('email_confirm_token').unique()\n    table.uuid('role_id').references('id').inTable('roles').onDelete('CASCADE').notNullable();\n\n    table.string(\"first_name\");\n    table.string(\"last_name\");\n\n    table.string(\"other_name\");\n    table.string(\"phone_number\").unique().notNullable();\n    table\n    .enu('user_gender', ['Male', 'Female', 'Unspecified'], {\n      // useNative: true,\n      // enumName: 'user_gender',\n    })\n    .defaultTo('Unspecified');\n    table.date('dob')\n    table.string(\"password\");\n    table.string('password_reset_token').unique()\n    table.bigInteger('lat',);\n    table.bigInteger('lng',);\n    table.timestamps(true,true);\n  });\n};\n\nexports.down = function (knex) {\n  return knex.schema.dropTable(\"users\");\n  // return knex.raw(\n  //   `\n  //   DROP TYPE \"user_gender\";\n  //   `\n  // );\n};\n"],"file":"20210215171009_users.js"}