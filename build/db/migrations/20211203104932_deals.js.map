{"version":3,"sources":["../../../src/db/migrations/20211203104932_deals.js"],"names":["up","knex","schema","createTable","table","uuid","primary","notNullable","references","inTable","onDelete","jsonb","defaultTo","JSON","stringify","string","unique","decimal","time","timestamps","down","dropTableIfExists"],"mappings":"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","sourcesContent":["export const up = knex =>\n  knex.schema.createTable('deals', table => {\n    table.uuid('id').primary().notNullable()\n    table\n      .uuid('deal_type_id')\n      .references('id')\n      .inTable('deal_types')\n      .onDelete('CASCADE')\n      .notNullable()\n    table\n      .uuid('deal_value_type_id')\n      .references('id')\n      .inTable('deal_value_types')\n      .onDelete('CASCADE')\n      .notNullable()\n    table\n      .uuid('deal_requirement_type_id')\n      .references('id')\n      .inTable('deal_requirement_types')\n      .onDelete('CASCADE')\n      .notNullable()\n    table\n      .uuid('deal_eligibility_type_id')\n      .references('id')\n      .inTable('deal_eligibility_types')\n      .onDelete('CASCADE')\n      .notNullable()\n    table.jsonb('brands').notNullable().defaultTo(JSON.stringify([]))\n    table\n      .uuid('cokitchen_id')\n      .references('id')\n      .inTable('cokitchens')\n      .onDelete('CASCADE')\n      .notNullable()\n    table.boolean('active').notNullable().defaultTo(true)\n    table.string('title').notNullable()\n    table.string('heading').notNullable()\n    table.string('body', 10000).notNullable()\n    table.string('min_amount').notNullable().defaultTo('0')\n    table.string('max_amount').notNullable().defaultTo('0')\n    table.string('fixed_amount').notNullable().defaultTo('0')\n    table\n      .jsonb('specific_customers')\n      .notNullable()\n      .defaultTo(JSON.stringify([]))\n\n    table.string('min_items').notNullable().defaultTo('0')\n    table.string('max_items').notNullable().defaultTo('0')\n    table.string('max_usage').notNullable().defaultTo('0')\n\n    table.string('discount_code').unique().notNullable()\n    table.jsonb('images').notNullable().defaultTo(JSON.stringify([]))\n    table.decimal('rate', 2, 1)\n    table.string('to_start_date').notNullable()\n    table.time('to_start_time').notNullable()\n    table.string('to_expire_date').notNullable()\n    table.time('to_expire_time').notNullable()\n\n    table.timestamps(true, true)\n  })\n\nexport const down = knex => knex.schema.dropTableIfExists('deals')\n"],"file":"20211203104932_deals.js"}