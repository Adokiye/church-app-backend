{"version":3,"sources":["../../../src/db/migrations/20211203104930_meals.js"],"names":["exports","up","knex","schema","raw","createTable","table","uuid","primary","notNullable","string","timestamps","jsonb","defaultTo","JSON","stringify","references","inTable","onDelete","down","dropTableIfExists"],"mappings":";;AAAAA,OAAO,CAACC,EAAR,GAAa,UAAUC,IAAV,EAAgB;AAC3B,SAAOA,IAAI,CAACC,MAAL,CACJC,GADI,CACA,uCADA,EAEJC,WAFI,CAEQ,OAFR,EAEiB,UAAAC,KAAK,EAAI;AAC7BA,IAAAA,KAAK,CAACC,IAAN,CAAW,IAAX,EAAiBC,OAAjB,GAA2BC,WAA3B;AACAH,IAAAA,KAAK,CAACI,MAAN,CAAa,MAAb,EAAqBD,WAArB;AACAH,IAAAA,KAAK,CAACK,UAAN,CAAiB,IAAjB,EAAuB,IAAvB;AACAL,IAAAA,KAAK,CAACM,KAAN,CAAY,QAAZ,EAAsBH,WAAtB,GAAoCI,SAApC,CAA8CC,IAAI,CAACC,SAAL,CAAe,EAAf,CAA9C;AACAT,IAAAA,KAAK,CAACM,KAAN,CAAY,aAAZ,EAA2BH,WAA3B,GAAyCI,SAAzC,CAAmDC,IAAI,CAACC,SAAL,CAAe,EAAf,CAAnD;AACAT,IAAAA,KAAK,CACFC,IADH,CACQ,kBADR,EAEGS,UAFH,CAEc,IAFd,EAGGC,OAHH,CAGW,iBAHX,EAIGC,QAJH,CAIY,SAJZ,EAKGT,WALH;AAMAH,IAAAA,KAAK,CACFC,IADH,CACQ,UADR,EAEGS,UAFH,CAEc,IAFd,EAGGC,OAHH,CAGW,QAHX,EAIGC,QAJH,CAIY,SAJZ,EAKGT,WALH;AAMAH,IAAAA,KAAK,CAACI,MAAN,CAAa,SAAb,EAAwB,EAAxB;AACAJ,IAAAA,KAAK,CAACI,MAAN,CAAa,aAAb,EAA4B,IAA5B;AACAJ,IAAAA,KAAK,WAAL,CAAc,UAAd,EAA0BG,WAA1B,GAAwCI,SAAxC,CAAkD,KAAlD;AACAP,IAAAA,KAAK,WAAL,CAAc,UAAd,EAA0BG,WAA1B,GAAwCI,SAAxC,CAAkD,KAAlD;AACAP,IAAAA,KAAK,CAACI,MAAN,CAAa,QAAb,EAAuBD,WAAvB;AACAH,IAAAA,KAAK,CAACI,MAAN,CAAa,kBAAb,EAAiCD,WAAjC;AACAH,IAAAA,KAAK,CAACM,KAAN,CAAY,WAAZ,EAAyBH,WAAzB,GAAuCI,SAAvC,CAAiDC,IAAI,CAACC,SAAL,CAAe,EAAf,CAAjD;AACAT,IAAAA,KAAK,CAACM,KAAN,CAAY,eAAZ,EAA6BH,WAA7B,GAA2CI,SAA3C,CAAqDC,IAAI,CAACC,SAAL,CAAe,EAAf,CAArD;AACAT,IAAAA,KAAK,CACFM,KADH,CACS,4BADT,EAEGH,WAFH,GAGGI,SAHH,CAGaC,IAAI,CAACC,SAAL,CAAe,EAAf,CAHb;AAIAT,IAAAA,KAAK,CACFM,KADH,CACS,yBADT,EAEGH,WAFH,GAGGI,SAHH,CAGaC,IAAI,CAACC,SAAL,CAAe,EAAf,CAHb;AAIAT,IAAAA,KAAK,CACFM,KADH,CACS,wBADT,EAEGH,WAFH,GAGGI,SAHH,CAGaC,IAAI,CAACC,SAAL,CAAe,EAAf,CAHb;AAIAT,IAAAA,KAAK,CACFM,KADH,CACS,wBADT,EAEGH,WAFH,GAGGI,SAHH,CAGaC,IAAI,CAACC,SAAL,CAAe,EAAf,CAHb;AAID,GA5CI,CAAP;AA6CD,CA9CD;;AAgDAf,OAAO,CAACmB,IAAR,GAAe,UAAUjB,IAAV,EAAgB;AAC7B,SAAOA,IAAI,CAACC,MAAL,CAAYiB,iBAAZ,CAA8B,OAA9B,CAAP;AACD,CAFD","sourcesContent":["exports.up = function (knex) {\n  return knex.schema\n    .raw('CREATE EXTENSION IF NOT EXISTS CITEXT')\n    .createTable('meals', table => {\n      table.uuid('id').primary().notNullable()\n      table.string('name').notNullable()\n      table.timestamps(true, true)\n      table.jsonb('images').notNullable().defaultTo(JSON.stringify([]))\n      table.jsonb('posist_data').notNullable().defaultTo(JSON.stringify({}))\n      table\n        .uuid('meal_category_id')\n        .references('id')\n        .inTable('meal_categories')\n        .onDelete('CASCADE')\n        .notNullable()\n      table\n        .uuid('brand_id')\n        .references('id')\n        .inTable('brands')\n        .onDelete('CASCADE')\n        .notNullable()\n      table.string('summary', 80)\n      table.string('description', 1000)\n      table.boolean('is_addon').notNullable().defaultTo(false)\n      table.boolean('is_combo').notNullable().defaultTo(false)\n      table.string('amount').notNullable()\n      table.string('preparation_time').notNullable()\n      table.jsonb('meal_tags').notNullable().defaultTo(JSON.stringify([]))\n      table.jsonb('meal_keywords').notNullable().defaultTo(JSON.stringify([]))\n      table\n        .jsonb('meal_descriptive_metadatas')\n        .notNullable()\n        .defaultTo(JSON.stringify([]))\n      table\n        .jsonb('meal_business_metadatas')\n        .notNullable()\n        .defaultTo(JSON.stringify([]))\n      table\n        .jsonb('meal_dietary_metadatas')\n        .notNullable()\n        .defaultTo(JSON.stringify([]))\n      table\n        .jsonb('meal_allergy_metadatas')\n        .notNullable()\n        .defaultTo(JSON.stringify([]))\n    })\n}\n\nexports.down = function (knex) {\n  return knex.schema.dropTableIfExists('meals')\n}\n"],"file":"20211203104930_meals.js"}