{"version":3,"sources":["../../../src/db/migrations/20211203104930_meals.js"],"names":["exports","up","knex","schema","raw","createTable","table","uuid","primary","notNullable","string","unique","timestamps","jsonb","defaultTo","JSON","stringify","references","inTable","onDelete","bigInteger","integer","down","dropTableIfExists"],"mappings":";;AAAAA,OAAO,CAACC,EAAR,GAAa,UAAUC,IAAV,EAAgB;AAC3B,SAAOA,IAAI,CAACC,MAAL,CACJC,GADI,CACA,uCADA,EAEJC,WAFI,CAEQ,OAFR,EAEiB,UAAAC,KAAK,EAAI;AAC7BA,IAAAA,KAAK,CAACC,IAAN,CAAW,IAAX,EAAiBC,OAAjB,GAA2BC,WAA3B;AACAH,IAAAA,KAAK,CAACI,MAAN,CAAa,MAAb,EAAqBC,MAArB;AACAL,IAAAA,KAAK,CAACM,UAAN,CAAiB,IAAjB,EAAuB,IAAvB;AACAN,IAAAA,KAAK,CAACO,KAAN,CAAY,QAAZ,EAAsBJ,WAAtB,GAAoCK,SAApC,CAA8CC,IAAI,CAACC,SAAL,CAAe,EAAf,CAA9C;AACAV,IAAAA,KAAK,CAACO,KAAN,CAAY,aAAZ,EAA2BJ,WAA3B,GAAyCK,SAAzC,CAAmDC,IAAI,CAACC,SAAL,CAAe,EAAf,CAAnD;AACAV,IAAAA,KAAK,CACFC,IADH,CACQ,kBADR,EAEGU,UAFH,CAEc,IAFd,EAGGC,OAHH,CAGW,iBAHX,EAIGC,QAJH,CAIY,SAJZ,EAKGV,WALH;AAMEH,IAAAA,KAAK,CACJC,IADD,CACM,UADN,EAECU,UAFD,CAEY,IAFZ,EAGCC,OAHD,CAGS,QAHT,EAICC,QAJD,CAIU,SAJV,EAKCV,WALD;AAMFH,IAAAA,KAAK,WAAL,CAAc,UAAd,EAA0BG,WAA1B,GAAwCK,SAAxC,CAAkD,KAAlD;AACAR,IAAAA,KAAK,WAAL,CAAc,UAAd,EAA0BG,WAA1B,GAAwCK,SAAxC,CAAkD,KAAlD;AACAR,IAAAA,KAAK,CAACc,UAAN,CAAiB,QAAjB,EAA2BX,WAA3B;AACAH,IAAAA,KAAK,CAACe,OAAN,CAAc,kBAAd,EAAkCZ,WAAlC;AACAH,IAAAA,KAAK,CAACO,KAAN,CAAY,WAAZ,EAAyBJ,WAAzB,GAAuCK,SAAvC,CAAiDC,IAAI,CAACC,SAAL,CAAe,EAAf,CAAjD;AACAV,IAAAA,KAAK,CAACO,KAAN,CAAY,eAAZ,EAA6BJ,WAA7B,GAA2CK,SAA3C,CAAqDC,IAAI,CAACC,SAAL,CAAe,EAAf,CAArD;AACAV,IAAAA,KAAK,CAACO,KAAN,CAAY,4BAAZ,EAA0CJ,WAA1C,GAAwDK,SAAxD,CAAkEC,IAAI,CAACC,SAAL,CAAe,EAAf,CAAlE;AACAV,IAAAA,KAAK,CAACO,KAAN,CAAY,yBAAZ,EAAuCJ,WAAvC,GAAqDK,SAArD,CAA+DC,IAAI,CAACC,SAAL,CAAe,EAAf,CAA/D;AACAV,IAAAA,KAAK,CAACO,KAAN,CAAY,wBAAZ,EAAsCJ,WAAtC,GAAoDK,SAApD,CAA8DC,IAAI,CAACC,SAAL,CAAe,EAAf,CAA9D;AACAV,IAAAA,KAAK,CAACO,KAAN,CAAY,wBAAZ,EAAsCJ,WAAtC,GAAoDK,SAApD,CAA8DC,IAAI,CAACC,SAAL,CAAe,EAAf,CAA9D;AAED,GA/BI,CAAP;AAgCD,CAjCD;;AAmCAhB,OAAO,CAACsB,IAAR,GAAe,UAAUpB,IAAV,EAAgB;AAC7B,SAAOA,IAAI,CAACC,MAAL,CAAYoB,iBAAZ,CAA8B,OAA9B,CAAP;AACD,CAFD","sourcesContent":["exports.up = function (knex) {\n  return knex.schema\n    .raw('CREATE EXTENSION IF NOT EXISTS CITEXT')\n    .createTable('meals', table => {\n      table.uuid('id').primary().notNullable()\n      table.string('name').unique()\n      table.timestamps(true, true)\n      table.jsonb('images').notNullable().defaultTo(JSON.stringify([]))\n      table.jsonb('posist_data').notNullable().defaultTo(JSON.stringify({}))\n      table\n        .uuid('meal_category_id')\n        .references('id')\n        .inTable('meal_categories')\n        .onDelete('CASCADE')\n        .notNullable()\n        table\n        .uuid('brand_id')\n        .references('id')\n        .inTable('brands')\n        .onDelete('CASCADE')\n        .notNullable()\n      table.boolean('is_addon').notNullable().defaultTo(false)\n      table.boolean('is_combo').notNullable().defaultTo(false)\n      table.bigInteger('amount').notNullable()\n      table.integer('preparation_time').notNullable()\n      table.jsonb('meal_tags').notNullable().defaultTo(JSON.stringify([]))\n      table.jsonb('meal_keywords').notNullable().defaultTo(JSON.stringify([]))\n      table.jsonb('meal_descriptive_metadatas').notNullable().defaultTo(JSON.stringify([]))\n      table.jsonb('meal_business_metadatas').notNullable().defaultTo(JSON.stringify([]))\n      table.jsonb('meal_dietary_metadatas').notNullable().defaultTo(JSON.stringify([]))\n      table.jsonb('meal_allergy_metadatas').notNullable().defaultTo(JSON.stringify([]))\n\n    })\n}\n\nexports.down = function (knex) {\n  return knex.schema.dropTableIfExists('meals')\n}\n"],"file":"20211203104930_meals.js"}