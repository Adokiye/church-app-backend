{"version":3,"sources":["../../../src/db/migrations/20210215171012_meals.js"],"names":["exports","up","knex","schema","raw","createTable","table","uuid","primary","notNullable","string","unique","timestamps","jsonb","defaultTo","JSON","stringify","references","inTable","onDelete","bigInteger","integer","down","dropTableIfExists"],"mappings":";;AAAAA,OAAO,CAACC,EAAR,GAAa,UAAUC,IAAV,EAAgB;AAC3B,SAAOA,IAAI,CAACC,MAAL,CAAYC,GAAZ,CAAgB,uCAAhB,EACNC,WADM,CACM,OADN,EACe,UAACC,KAAD,EAAW;AAC/BA,IAAAA,KAAK,CAACC,IAAN,CAAW,IAAX,EAAiBC,OAAjB,GAA2BC,WAA3B;AACAH,IAAAA,KAAK,CAACI,MAAN,CAAa,MAAb,EAAqBC,MAArB;AACAL,IAAAA,KAAK,CAACM,UAAN,CAAiB,IAAjB,EAAsB,IAAtB;AACAN,IAAAA,KAAK,CAACO,KAAN,CAAY,QAAZ,EAAsBJ,WAAtB,GAAoCK,SAApC,CAA8CC,IAAI,CAACC,SAAL,CAAe,EAAf,CAA9C;AACAV,IAAAA,KAAK,CAACO,KAAN,CAAY,aAAZ,EAA2BJ,WAA3B,GAAyCK,SAAzC,CAAmDC,IAAI,CAACC,SAAL,CAAe,EAAf,CAAnD;AACAV,IAAAA,KAAK,CAACC,IAAN,CAAW,kBAAX,EAA+BU,UAA/B,CAA0C,IAA1C,EAAgDC,OAAhD,CAAwD,iBAAxD,EAA2EC,QAA3E,CAAoF,SAApF,EAA+FV,WAA/F;AAEAH,IAAAA,KAAK,WAAL,CAAc,UAAd,EAA0BG,WAA1B,GAAwCK,SAAxC,CAAkD,KAAlD;AACAR,IAAAA,KAAK,WAAL,CAAc,UAAd,EAA0BG,WAA1B,GAAwCK,SAAxC,CAAkD,KAAlD;AACAR,IAAAA,KAAK,CAACc,UAAN,CAAiB,QAAjB,EAA2BX,WAA3B;AACAH,IAAAA,KAAK,CAACe,OAAN,CAAc,kBAAd,EAAkCZ,WAAlC;AACD,GAbM,CAAP;AAcD,CAfD;;AAiBAT,OAAO,CAACsB,IAAR,GAAe,UAAUpB,IAAV,EAAgB;AAC7B,SAAOA,IAAI,CAACC,MAAL,CAAYoB,iBAAZ,CAA8B,OAA9B,CAAP;AACD,CAFD","sourcesContent":["exports.up = function (knex) {\n  return knex.schema.raw('CREATE EXTENSION IF NOT EXISTS CITEXT')\n  .createTable(\"meals\", (table) => {\n    table.uuid('id').primary().notNullable()\n    table.string(\"name\").unique();\n    table.timestamps(true,true);\n    table.jsonb(\"images\").notNullable().defaultTo(JSON.stringify([]));\n    table.jsonb(\"posist_data\").notNullable().defaultTo(JSON.stringify({}));\n    table.uuid('meal_category_id').references('id').inTable('meal_categories').onDelete('CASCADE').notNullable();\n\n    table.boolean('is_addon').notNullable().defaultTo(false)\n    table.boolean('is_combo').notNullable().defaultTo(false)\n    table.bigInteger('amount').notNullable()\n    table.integer('preparation_time').notNullable()\n  });\n};\n\nexports.down = function (knex) {\n  return knex.schema.dropTableIfExists(\"meals\");\n};\n"],"file":"20210215171012_meals.js"}